# CodeInterpreterTool

## Description
This tool allows the Agent to execute Python3 code generated by the Agent itself. The code is executed in a sandboxed environment using containerization, so it is safe to run any code.

It is incredibly useful as it allows the Agent to generate code, run it in the same environment, get the result, and use it to make decisions.

## Requirements

- Docker or Podman

## Installation
Install the `crewai_tools` package:

```shell
pip install 'crewai[tools]'
```

## Usage

By default, the `CodeInterpreterTool` uses Docker to manage containers. However, you can specify different container strategies or even implement your own.

### Using Docker (default)

```python
from crewai_tools import CodeInterpreterTool

Agent(
    ...
    tools=[CodeInterpreterTool()],
)
```

### Using Podman

To use Podman instead of Docker, you can specify the `PodmanContainer` as the container manager:

```python
from crewai_tools import CodeInterpreterTool
from crewai_tools.tools.code_interpreter_tool.podman_container import PodmanContainer

Agent(
    ...
    tools=[CodeInterpreterTool(container_manager=PodmanContainer)],
)
```

### Using a Custom Container Manager

You can implement your own container manager by creating a class that inherits from `ContainerManager` and implementing the required methods.

```python
from crewai_tools.tools.code_interpreter_tool.container_manager import ContainerManager

class CustomContainerManager(ContainerManager):
    def __init__(self, image_tag, dockerfile_path=None, container_name="code-interpreter"):
        # Your custom initialization
        pass

    def verify_image(self):
        # Your custom implementation
        pass

    def init_container(self):
        # Your custom implementation
        pass

    def install_libraries(self, libraries):
        # Your custom implementation
        pass

    def run_code(self, code):
        # Your custom implementation
        pass

    def cleanup(self):
        # Your custom implementation
        pass

# Use your custom container manager
Agent(
    ...
    tools=[CodeInterpreterTool(container_manager=CustomContainerManager)],
)
```

### Using a Custom Dockerfile

If you need to use your own Dockerfile, you can specify the path:

```python
from crewai_tools import CodeInterpreterTool

Agent(
    ...
    tools=[CodeInterpreterTool(user_dockerfile_path="<Dockerfile_path>")],
)
```

### Notes

- The first time you run the tool, it may take some time to build the container image.
- Ensure that you have the necessary permissions to run Docker or Podman commands.

## Example

Here's a complete example of using the `CodeInterpreterTool` with the default Docker container manager:

```python
from crewai_tools import CodeInterpreterTool

# Instantiate the tool
code_interpreter = CodeInterpreterTool()

# Use it within your Agent
Agent(
    ...
    tools=[code_interpreter],
)
```

And here's how to specify using Podman:

```python
from crewai_tools import CodeInterpreterTool
from crewai_tools.tools.code_interpreter_tool.podman_container import PodmanContainer

code_interpreter = CodeInterpreterTool(container_manager=PodmanContainer)

Agent(
    ...
    tools=[code_interpreter],
)
```

## Conclusion

By allowing you to specify the container strategy and providing an interface for custom container managers, the `CodeInterpreterTool` offers flexibility and extensibility to suit various needs and environments.
